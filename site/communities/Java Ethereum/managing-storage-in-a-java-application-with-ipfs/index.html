<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="../../../img/favicon.ico">
    <title>Managing storage in a Java application with IPFS &mdash; archive.kauri.io</title>
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:400,700">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/tonsky/FiraCode@1.206/distr/fira_code.css">
    <link rel="stylesheet" href="//use.fontawesome.com/releases/v5.8.1/css/all.css">
    <link rel="stylesheet" href="//use.fontawesome.com/releases/v5.8.1/css/v4-shims.css">
    <link rel="stylesheet" href="../../../css/theme.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
    <link rel="stylesheet" href="../../../css/extra.css">
    <script src="//code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/solidity.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/go.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/rust.min.js"></script>
    <script>
        hljs.initHighlightingOnLoad();
    </script> 
</head>

<body ontouchstart="">
    <div id="container">
        <aside>
            <div class="home">
                <div class="title">
                    <button class="hamburger"></button>
                    <a href="../../.." class="site-name"> archive.kauri.io</a>
                </div>
                <div class="search">
                    <div role="search">
    <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
        <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
    </form>
</div>
                </div>
            </div>
            <nav class="nav">
                <ul class="root">
                    <li class="toctree-l1"><a class="nav-item" href="../../..">Home</a></li>
                    <li class="toctree-l1"><button class="section nav-item">Communities</button>
<ul class="subnav">
    <li class="toctree-l2"><button class="section nav-item hide">Getting started with dapp development</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../Getting%20started%20with%20dapp%20development/tips-for-starting-dapp-development/">Tips for Starting Dapp Development</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Getting%20started%20with%20dapp%20development/an-introduction-to-solidity-for-experienced-devel/">An Introduction to Solidity for Experienced Developers</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Getting%20started%20with%20dapp%20development/truffle--adding-a-frontend-with-react-box/">Truffle  Adding a frontend with react box</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Getting%20started%20with%20dapp%20development/truffle--testing-your-smart-contract/">Truffle  Testing your smart contract</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Getting%20started%20with%20dapp%20development/truffle--smart-contract-compilation-and-deploymen/">Truffle  Smart Contract Compilation & Deployment</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Getting%20started%20with%20dapp%20development/understanding-smart-contract-compilation-and-depl/">Understanding smart contract compilation and deployment</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Getting%20started%20with%20dapp%20development/tools-for-dapp-development/">Tools for dApp development</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Getting%20started%20with%20dapp%20development/full-stack-dapp-tutorial-series-intro/">Full Stack dApp Tutorial Series - Intro</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Getting%20started%20with%20dapp%20development/erc-721-non-fungible-token-standard/">ERC-721 Non-Fungible Token Standard</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Getting%20started%20with%20dapp%20development/create-a-%22hello-world%22-fullstack-dapp/">Create a "Hello World" fullstack dapp</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Getting%20started%20with%20dapp%20development/a-fullstack-dapp-for-creating-tokens/">A fullstack dapp for creating tokens</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Getting%20started%20with%20dapp%20development/a-fullstack-dapp-for-creating-unique-tradable-tok/">A fullstack dapp for creating unique tradable tokens</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Getting%20started%20with%20dapp%20development/blockchain-explained/">Blockchain Explained</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Getting%20started%20with%20dapp%20development/remix-ide-your-first-smart-contract/">Remix IDE - Your first smart contract</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Getting%20started%20with%20dapp%20development/an-introduction-to-smart-contracts-with-solidity/">An Introduction to Smart Contracts with Solidity</a></li>
</ul></li>
    <li class="toctree-l2 current"><button class="section nav-item">Java Ethereum</button>
<ul class="subnav">
    <li class="toctree-l3"><a class="nav-item" href="../how-to-test-ethereum-smart-contracts-from-java/">How to test Ethereum smart contracts from Java</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../web3j-transaction-managers/">Web3j Transaction Managers</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../manage-erc20-tokens-in-java-with-web3j/">Manage ERC20 tokens in Java with Web3j</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../running-a-pantheon-node-in-java-integration-tests/">Running a Pantheon Node in Java Integration Tests</a></li>
    <li class="toctree-l3 current"><a class="nav-item current" href="./">Managing storage in a Java application with IPFS</a>
<ul class="subnav">
<li class="toctree-l4"><a class="nav-item toc" href="#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="nav-item toc" href="#dependencies">Dependencies</a></li>
<li class="toctree-l4"><a class="nav-item toc" href="#connect-to-ipfs">Connect to IPFS</a></li>
<li class="toctree-l4"><a class="nav-item toc" href="#add-content-to-ipfs">Add content to IPFS</a></li>
<li class="toctree-l4"><a class="nav-item toc" href="#read-content-from-ipfs">Read content from IPFS</a></li>
<li class="toctree-l4"><a class="nav-item toc" href="#pinunpin-content">Pin/Unpin content</a></li>
<li class="toctree-l4"><a class="nav-item toc" href="#ipns">IPNS</a></li>
<li class="toctree-l4"><a class="nav-item toc" href="#other-operations">Other operations</a></li>
<li class="toctree-l4"><a class="nav-item toc" href="#references">References</a></li>
</ul></li>
    <li class="toctree-l3"><a class="nav-item" href="../using-besu-the-java-ethereum-client-with-linuxmac/">Using Besu, the Java Ethereum Client with Linux/MacOS</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../listening-for-ethereum-smart-contract-events-in-j/">Listening for Ethereum Smart Contract Events in Java</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../interacting-with-an-ethereum-smart-contract-in-ja/">Interacting with an Ethereum Smart Contract in Java</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../generate-a-java-wrapper-from-your-smart-contract/">Generate a Java Wrapper from your Smart Contract</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../manage-an-ethereum-account-with-java-and-web3j/">Manage an Ethereum account with Java and Web3j</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../connecting-to-an-ethereum-client-with-java-eclips/">Connecting to an Ethereum client with Java, Eclipse and Web3j</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">Ethereum Node Runners</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../Ethereum%20Node%20Runners/run-an-ethereum-node-on-debian-with-an-external-s/">Run an Ethereum node on Debian with an External SSD (Mar 2020)</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Ethereum%20Node%20Runners/ethereum-on-arm.-turn-your-arm-device-into-a-full/">Ethereum on ARM. Turn your ARM device into a full Ethereum node just by flashing a MicroSD card</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Ethereum%20Node%20Runners/make-use-of-your-remote-ethereum-node-using-an-ss/">Make use of your remote Ethereum node using an SSH tunnel and MetaMask</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Ethereum%20Node%20Runners/how-to-install-and-synchronize-your-own-remote-et/">How to install and synchronize your own remote Ethereum node</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Ethereum%20Node%20Runners/how-to-set-up-a-simple-linux-firewall/">How to set up a simple Linux firewall</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Ethereum%20Node%20Runners/supported-hardware-to-run-an-ethereum-node/">Supported hardware to run an Ethereum node</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Ethereum%20Node%20Runners/monitor-your-geth-node-with-google-sheet/">Monitor your Geth node with Google Sheet</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Ethereum%20Node%20Runners/running-an-ethereum-full-node-on-a-raspberrypi-4-/">Running an Ethereum Full Node on a RaspberryPi 4 (model B)</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">IPFS</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../IPFS/building-a-twitter-bot-using-ipfs-cluster/">Building a Twitter Bot using IPFS Cluster 🤖</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../IPFS/hands-on-ipld-tutorial-in-golang--part-2/">Hands-on IPLD Tutorial in Golang  PART 2</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../IPFS/understanding-ipfs-in-depth%2826%29--what-is-interpla/">Understanding IPFS in Depth(2/6)  What is InterPlanetary Linked Data(IPLD)?</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../IPFS/hands-on-ipld-tutorial-in-golang/">Hands-on IPLD Tutorial in Golang</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../IPFS/understanding-ipfs-in-depth%2816%29--a-beginner-to-ad/">Understanding IPFS in Depth(1/6)  A Beginner to Advanced Guide</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../IPFS/orbitdb--serverless-distributed-peer-to-peer-data/">OrbitDB  Serverless, Distributed, Peer-to-Peer Database</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../IPFS/getting-started-with-mahuta-a-search-engine-for-t/">Getting started with Mahuta - A Search engine for the IPFS</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../IPFS/peer-to-peer-hypermedia-with-ipfs/">Peer-to-peer hypermedia with IPFS</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../IPFS/installing-ipfs/">Installing IPFS</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../IPFS/improving-ipfs-decentralization-introducing-ahken/">Improving IPFS Decentralization - Introducing Ahken</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../IPFS/managing-storage-in-a-java-application-with-ipfs/">Managing storage in a Java application with IPFS</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">Documentation and technical communication</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../Documentation%20and%20technical%20communication/why-do-people-write/">Why do people write?</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Documentation%20and%20technical%20communication/language-and-understandable-writing/">Language and understandable writing</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Documentation%20and%20technical%20communication/documentation-structure/">Documentation structure</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../Documentation%20and%20technical%20communication/why-write-documentation/">Why write documentation</a></li>
</ul></li>
</ul></li>
                    <li class="toctree-l1"><button class="section nav-item">Collections</button>
<ul class="subnav">
    <li class="toctree-l2"><button class="section nav-item hide">A Deep Dive Into The Ethereum Virtual Machine (EVM) Series</button>
<ul class="subnav hide">
    <li class="toctree-l3">
<a class="nav-item" href="../../../collections/A%20Deep%20Dive%20Into%20The%20Ethereum%20Virtual%20Machine%20%28EVM%29%20Series/a-deep-dive-into-the-ethereum-virtual-machine-%28ev/">A Deep Dive into the Ethereum Virtual Machine (EVM) - part 1  Introduction</a></li>
    <li class="toctree-l3">
<a class="nav-item" href="../../../collections/A%20Deep%20Dive%20Into%20The%20Ethereum%20Virtual%20Machine%20%28EVM%29%20Series/a-deep-dive-into-the-ethereum-virtual-machine-%28ev/">A Deep Dive into the Ethereum Virtual Machine (EVM) - part 2  Memory and Storage</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/A%20Deep%20Dive%20Into%20The%20Ethereum%20Virtual%20Machine%20%28EVM%29%20Series/a-deep-dive-into-the-ethereum-virtual-machine-%28ev/">A Deep Dive into the Ethereum Virtual Machine (EVM) - Part 3  Execution Model of the EVM</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/A%20Deep%20Dive%20Into%20The%20Ethereum%20Virtual%20Machine%20%28EVM%29%20Series/a-deep-dive-into-the-ethereum-virtual-machine-par/">A Deep Dive into the Ethereum Virtual Machine - Part 4  The EVM and High-Level Programming Languages</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">Build your very own self-hosting platform with Raspberry Pi and Kubernetes</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Build%20your%20very%20own%20self-hosting%20platform%20with%20Raspberry%20Pi%20and%20Kubernetes/%2818%29-build-your-very-own-self-hosting-platform-wi/">(1/8) Build your very own self-hosting platform with Raspberry Pi and Kubernetes - Introduction</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Build%20your%20very%20own%20self-hosting%20platform%20with%20Raspberry%20Pi%20and%20Kubernetes/%2828%29-install-raspbian-operating-system-and-prepar/">(2/8) Install Raspbian Operating-System and prepare the system for Kubernetes</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Build%20your%20very%20own%20self-hosting%20platform%20with%20Raspberry%20Pi%20and%20Kubernetes/%2838%29-install-and-configure-a-kubernetes-cluster-w/">(3/8) Install and configure a Kubernetes cluster with k3s to self-host applications</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Build%20your%20very%20own%20self-hosting%20platform%20with%20Raspberry%20Pi%20and%20Kubernetes/%2848%29-deploy-nextcloud-on-kuberbetes--the-self-hos/">(4/8) Deploy NextCloud on Kuberbetes  The self-hosted Dropbox</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Build%20your%20very%20own%20self-hosting%20platform%20with%20Raspberry%20Pi%20and%20Kubernetes/%2858%29-self-host-your-media-center-on-kubernetes-wi/">(5/8) Self-host your Media Center On Kubernetes with Plex, Sonarr, Radarr, Transmission and Jackett</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Build%20your%20very%20own%20self-hosting%20platform%20with%20Raspberry%20Pi%20and%20Kubernetes/%2868%29-self-host-pi-hole-on-kubernetes-and-block-ad/">(6/8) Self-host Pi-Hole on Kubernetes and block ads and trackers at the network level</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Build%20your%20very%20own%20self-hosting%20platform%20with%20Raspberry%20Pi%20and%20Kubernetes/%2878%29-self-host-your-password-manager-with-bitward/">(7/8) Self-host your password manager with Bitwarden</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Build%20your%20very%20own%20self-hosting%20platform%20with%20Raspberry%20Pi%20and%20Kubernetes/%2888%29-deploy-prometheus-and-grafana-to-monitor-a-k/">(8/8) Deploy Prometheus and Grafana to monitor a Kubernetes cluster</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">A Hackathon Survival Guide</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/A%20Hackathon%20Survival%20Guide/the-hack%21-what-is-a-hackathon/">The Hack?!? What is a hackathon?</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/A%20Hackathon%20Survival%20Guide/create-a-%22hello-world%22-fullstack-dapp/">Create a "Hello World" fullstack dapp</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/A%20Hackathon%20Survival%20Guide/full-stack-dapp-tutorial-series-intro/">Full Stack dApp Tutorial Series - Intro</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/A%20Hackathon%20Survival%20Guide/ethereum-101-part-1-what-is-ethereum/">Ethereum 101 - Part 1 - What is Ethereum?</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/A%20Hackathon%20Survival%20Guide/remix-ide-your-first-smart-contract/">Remix IDE - Your first smart contract</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/A%20Hackathon%20Survival%20Guide/interacting-with-an-ethereum-smart-contract-in-ja/">Interacting with an Ethereum Smart Contract in Java</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/A%20Hackathon%20Survival%20Guide/a-.net-developer-s-workflow-for-creating-and-call/">A .NET Developer’s Workflow for Creating and Calling Ethereum Smart Contracts</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/A%20Hackathon%20Survival%20Guide/sending-ethereum-transactions-with-rust/">Sending Ethereum Transactions with Rust</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/A%20Hackathon%20Survival%20Guide/generate-a-java-wrapper-from-your-smart-contract/">Generate a Java Wrapper from your Smart Contract</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/A%20Hackathon%20Survival%20Guide/accelerating-dapp-development-with-ethers.js/">Accelerating DApp Development with Ethers.js</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/A%20Hackathon%20Survival%20Guide/nethereum-an-open-source-.net-integration-library/">Nethereum - An open source .NET integration library for blockchain</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/A%20Hackathon%20Survival%20Guide/creating-a-dapp-in-go-with-geth/">Creating a DApp in Go with Geth</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/A%20Hackathon%20Survival%20Guide/tools-for-dapp-development/">Tools for dApp development</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/A%20Hackathon%20Survival%20Guide/ethasketch/">EthASketch</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/A%20Hackathon%20Survival%20Guide/bountibot--rewarding-github-pull-requests-for-you/">Bountibot  rewarding GitHub Pull Requests for you and the rest of the OSS community</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/A%20Hackathon%20Survival%20Guide/eth-dev-tools/">ETH Dev Tools</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">Web3j Cheat Sheet (Java Ethereum)</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Web3j%20Cheat%20Sheet%20%28Java%20Ethereum%29/retrieving-an-ethereum-account-balance-in-web3j/">Retrieving an Ethereum Account Balance in Web3j</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Web3j%20Cheat%20Sheet%20%28Java%20Ethereum%29/converting-between-ether-units-denominations-in-w/">Converting Between Ether Units / Denominations in Web3j</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Web3j%20Cheat%20Sheet%20%28Java%20Ethereum%29/creating-a-web3j-wallet-from-a-mnemonic-code-%28see/">Creating a Web3j Wallet from a Mnemonic Code (Seed Phrase)</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Web3j%20Cheat%20Sheet%20%28Java%20Ethereum%29/sending-an-ether-transfer-transaction-from-one-ac/">Sending an Ether Transfer Transaction from One Account to Another in Web3j</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Web3j%20Cheat%20Sheet%20%28Java%20Ethereum%29/signing-an-ethereum-transaction-in-web3j/">Signing an Ethereum Transaction in Web3j</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Web3j%20Cheat%20Sheet%20%28Java%20Ethereum%29/signing-data-in-java-and-web3j/">Signing Data in Java and Web3j</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">OpenZeppelin</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/OpenZeppelin/openzeppelin-part-1--introductory/">OpenZeppelin Part 1  Introductory</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/OpenZeppelin/openzeppelin-part-2--access-control/">OpenZeppelin Part 2  Access Control</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/OpenZeppelin/openzeppelin-part-3--token-standards/">OpenZeppelin Part 3  Token Standards</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/OpenZeppelin/openzeppelin-part-4--crowdsales/">OpenZeppelin Part 4  Crowdsales</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">A non practitioner guide to machine learning</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/A%20non%20practitioner%20guide%20to%20machine%20learning%20/getting-started-with-machine-learning-%28non-practi/">Getting Started With Machine Learning (Non practitioner guide)</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/A%20non%20practitioner%20guide%20to%20machine%20learning%20/installing-anaconda-python3-and-tensorflow/">Installing Anaconda, Python3 and Tensorflow</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/A%20non%20practitioner%20guide%20to%20machine%20learning%20/regression-with-python-keras-and-tensorflow/">Regression with Python, Keras and Tensorflow</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/A%20non%20practitioner%20guide%20to%20machine%20learning%20/predict-cryptocurrency-prices-with-tensorflow-as-/">Predict cryptocurrency prices with Tensorflow as binary classification problem</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/A%20non%20practitioner%20guide%20to%20machine%20learning%20/multi-class-classification-example-with-convoluti/">Multi-class classification example with Convolutional Neural Network in Keras and Tensorflow</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">An ethereum test toolkit in Go</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/An%20ethereum%20test%20toolkit%20in%20Go/sending-transactions-on-geth-s-simulated-backend/">Sending Transactions on GETH's Simulated Backend</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/An%20ethereum%20test%20toolkit%20in%20Go/interacting-with-smart-contracts-from-geth-s-simu/">Interacting with smart contracts from GETH's Simulated Backend</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/An%20ethereum%20test%20toolkit%20in%20Go/generating-a-load-of-keys-for-testing-in-go/">Generating a load of keys for testing in Go</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/An%20ethereum%20test%20toolkit%20in%20Go/the-geth-simulated-backend/">The GETH Simulated Backend</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">Monitoring Kubernetes with Elastic Stack</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Monitoring%20Kubernetes%20with%20Elastic%20Stack/%2815%29-getting-started-with-elastic-stack-for-monit/">(1/5) Getting started with Elastic Stack for monitoring on Kubernetes</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Monitoring%20Kubernetes%20with%20Elastic%20Stack/%2825%29-install-elasticsearch-and-kibana-to-store-an/">(2/5) Install ElasticSearch and Kibana to store and visualize monitoring data</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Monitoring%20Kubernetes%20with%20Elastic%20Stack/%2835%29-collect-metrics-with-elastic-metricbeat-for-/">(3/5) Collect metrics with Elastic Metricbeat for monitoring Kubernetes</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Monitoring%20Kubernetes%20with%20Elastic%20Stack/%2845%29-collect-logs-with-elastic-filebeat-for-monit/">(4/5) Collect logs with Elastic Filebeat for monitoring Kubernetes</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Monitoring%20Kubernetes%20with%20Elastic%20Stack/%2855%29-collect-traces-with-elastic-apm-for-monitori/">(5/5) Collect traces with Elastic APM for monitoring Kubernetes</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">Founder interviews</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Founder%20interviews/fluree--blockchain-graphql-and-more-all-in-one-da/">Fluree  Blockchain, GraphQL, and more all in one database</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Founder%20interviews/true-anonymity-privacy-and-snapps-with-simon-harm/">True anonymity, privacy, and SNApps with Simon Harman of Loki</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Founder%20interviews/the-aeternity-blockchain-with-emil-wagner/">The Æternity blockchain with Emil Wagner</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Founder%20interviews/embleema--the-blockchain-that-lets-you-own-your-h/">Embleema  The Blockchain That Lets You Own Your Health Data</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">Vyper Full Stack dApp Tutorial Series</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Vyper%20Full%20Stack%20dApp%20Tutorial%20Series/remix-ide-your-first-vyper-smart-contract/">Remix IDE - Your first Vyper smart contract</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Vyper%20Full%20Stack%20dApp%20Tutorial%20Series/understanding-smart-contract-compilation-and-depl/">Understanding smart contract compilation and deployment</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Vyper%20Full%20Stack%20dApp%20Tutorial%20Series/truffle--smart-contract-compilation-and-deploymen/">Truffle  Smart Contract Compilation & Deployment</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Vyper%20Full%20Stack%20dApp%20Tutorial%20Series/truffle--testing-your-smart-contract/">Truffle  Testing your smart contract</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Vyper%20Full%20Stack%20dApp%20Tutorial%20Series/tools-for-working-with-vyper/">Tools for working with Vyper</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">Flexible, Upgradeable & Highly Available NFTs</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Flexible%2C%20Upgradeable%20%26%20Highly%20Available%20NFTs/creating-a-flexible-nft-%28part-1%29/">Creating a Flexible NFT (Part 1)</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Flexible%2C%20Upgradeable%20%26%20Highly%20Available%20NFTs/creating-a-flexible-nft-%28part-2%29/">Creating a Flexible NFT (Part 2)</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">Libra</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Libra/building-and-working-with-facebook-s-cryptocurren/">Building and Working with Facebook’s Cryptocurrency Libra</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Libra/whitepaper-deep-dive-move--facebook-libra-blockch/">Whitepaper Deep Dive — Move  Facebook Libra Blockchain’s New Programming Language</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Libra/quick-dive-into-the-move-programming-language/">Quick Dive into the Move Programming Language</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">Bitcoin</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Bitcoin/bitcoin-blockchain-overview/">Bitcoin Blockchain Overview</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Bitcoin/creating-bitcoin-transactions/">Creating Bitcoin Transactions</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Bitcoin/bitcoin-contract-scripts/">Bitcoin Contract Scripts</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Bitcoin/lightning-at-home/">Lightning at Home</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Bitcoin/lnd-overview-and-developer-guide/">LND Overview and Developer Guide</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">Getting Started</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Getting%20Started/blockchain-explained/">Blockchain Explained</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Getting%20Started/an-introduction-to-smart-contracts-with-solidity/">An Introduction to Smart Contracts with Solidity</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Getting%20Started/an-introduction-to-smart-contracts-with-vyper/">An Introduction to Smart Contracts with Vyper</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Getting%20Started/cute-kitties-and-where-to-find-them-an-introducti/">Cute Kitties and Where to Find Them — An Introduction to Non-Fungible Tokens</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Getting%20Started/erc-721-non-fungible-token-standard/">ERC-721 Non-Fungible Token Standard</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Getting%20Started/erc-20-token-standard/">ERC-20 Token Standard</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Getting%20Started/develop-your-erc-20-token-explained%21/">Develop your ERC-20 Token — explained!</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Getting%20Started/gamifying-crypto-assets-with-the-erc998-composabl/">Gamifying Crypto Assets with the ERC998 Composables Token Standard</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Getting%20Started/erc-20-and-its-discontents--the-rise-of-comrades-/">ERC-20 and Its Discontents  The Rise of Comrades ERC-777 & ERC-1820</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Getting%20Started/creating-a-dapp-in-go-with-geth/">Creating a DApp in Go with Geth</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Getting%20Started/smart-contracts-integration-with-nethereum/">Smart contracts integration with Nethereum</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Getting%20Started/signing-messages-with-nethereum/">Signing messages with Nethereum</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Getting%20Started/managing-nonces-with-nethereum/">Managing nonces with Nethereum</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Getting%20Started/connecting-to-an-ethereum-client-with-java-eclips/">Connecting to an Ethereum client with Java, Eclipse and Web3j</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">Privacy</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Privacy/introduction-to-cryptography/">Introduction to Cryptography</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Privacy/building-on-bulletproofs-short-proofs-for-confide/">Building on Bulletproofs - Short Proofs for Confidential Transactions</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Privacy/enigma-protocol/">Enigma Protocol</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Privacy/how-to-code-your-own-confidential-token-on-ethere/">How to Code Your Own Confidential Token on Ethereum</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Privacy/data-privacy-with-the-nucypher-network/">Data Privacy with the NuCypher Network</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Privacy/nucypher-pyumbral/">NuCypher - PyUmbral</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Privacy/nightfall-private-token-and-nft-transfers-on-ethe/">Nightfall - Private Token and NFT Transfers on Ethereum</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Privacy/privacy-with-pantheon-ethereum-java-client/">Privacy with Pantheon Ethereum Java Client</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Privacy/parity-private-transactions/">Parity - Private Transactions</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Privacy/introducing-beam%21/">Introducing Beam!</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Privacy/a-short-history-of-mimblewimble--from-hogwarts-to/">A Short History of Mimblewimble  From Hogwarts to Mobile Wallets</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Privacy/why-beam-is-sound-money/">Why Beam is Sound Money</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Privacy/introduction-to-mimblewimble-and-grin/">Introduction to MimbleWimble and Grin</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Privacy/a-beginner-s-guide-to-zcash/">A beginner’s guide to Zcash</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Privacy/a-beginner-s-guide-to-monero/">A beginner’s guide to Monero</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">Open Finance (DeFi)</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Open%20Finance%20%28DeFi%29/kyber-network--on-chain-liquidity-protocol/">Kyber Network  On-chain liquidity protocol</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Open%20Finance%20%28DeFi%29/compound--money-markets-on-ethereum/">Compound  Money markets on Ethereum</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Open%20Finance%20%28DeFi%29/0x--peer-to-peer-exchange-protocol/">0x  Peer-to-peer exchange protocol</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Open%20Finance%20%28DeFi%29/makerdao--decentralized-stablecoin-and-collateral/">MakerDAO  Decentralized stablecoin and collateral loans</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Open%20Finance%20%28DeFi%29/uniswap--protocol-for-automated-token-exchange/">Uniswap  Protocol for automated token exchange</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Open%20Finance%20%28DeFi%29/set-protocol--baskets-of-tokenized-assets/">Set Protocol  Baskets of tokenized assets</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Open%20Finance%20%28DeFi%29/an-introduction-to-bonding-curves/">An Introduction to Bonding Curves</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/Open%20Finance%20%28DeFi%29/incentivizing-high-quality-curation-with-a-token-/">Incentivizing high-quality curation with a Token-Curated Registry</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">DevOps</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/DevOps/lint-your-solidity-contracts-with-solhint/">Lint your Solidity contracts with Solhint</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/DevOps/lint-your-solidity-contracts-with-ethlint/">Lint your Solidity contracts with Ethlint</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/DevOps/truffle--testing-your-smart-contract/">Truffle  Testing your smart contract</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/DevOps/truffle-101-development-tools-for-smart-contracts/">Truffle 101 - Development Tools for Smart Contracts</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/DevOps/analyze-solidity-smart-contracts-with-slither/">Analyze Solidity Smart Contracts with Slither</a></li>
</ul></li>
    <li class="toctree-l2"><button class="section nav-item hide">SecureETH</button>
<ul class="subnav hide">
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/SecureETH/system-description-document/">System Description Document</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/SecureETH/secureth-guidelines-getting-started/">SecurEth Guidelines - Getting Started</a></li>
    <li class="toctree-l3"><a class="nav-item" href="../../../collections/SecureETH/secureth-guidelines-introduction/">SecurEth Guidelines Introduction</a></li>
</ul></li>
</ul></li>
                </ul>
            </nav>
            <div class="repo">
    <div class="previous"><a href="../running-a-pantheon-node-in-java-integration-tests/">&laquo; Previous</a></div>
    <div class="next"><a href="../using-besu-the-java-ethereum-client-with-linuxmac/">Next &raquo;</a></div>
</div>
        </aside>
        <div id="spacer"><button class="arrow"></button></div>
        <main>
            <div class="home-top">
                <button class="hamburger"></button>
                <a href="../../.." class="site-name"> archive.kauri.io</a>
            </div>
            <div id="main">
                <nav class="breadcrumbs">
<ul>
    <li>Communities &raquo; </li><li>Java Ethereum</li>
</ul>
</nav>
                <div id="content"><h1 id="managing-storage-in-a-java-application-with-ipfs">Managing storage in a Java application with IPFS</h1>
<p><img alt="" src="https://ipfs.infura.io/ipfs/QmVGsfP47b62S9Xs4R4xiiTwFAwFD3sySBhbL5BLChqr5f" /></p>
<p>In this article, we learn how to interact with <strong><a href="https://ipfs.io/">IPFS</a> (InterPlanetary File System)</strong> in Java using the official <a href="https://github.com/ipfs/java-ipfs-http-client"><strong>java-ipfs-http-client library</strong></a>. This library connects to an IPFS node and wraps most of the operations offered by the <a href="https://docs.ipfs.io/reference/api/http/">HTTP API</a>.</p>
<p>The following diagram describes a Java program connected to an IPFS node via the <strong>java-ipfs-http-client</strong> library to the API Server.</p>
<p><img alt="" src="https://imgur.com/RRB6chj.png" /></p>
<ul>
<li>API server (default port: 5001): Full API</li>
<li>Gateway server (default port: 8080): Read Only API (access to data only)</li>
<li>P2P (default port: 4001): Peer-to-peer interface</li>
</ul>
<p><br /></p>
<h3 id="prerequisites">Prerequisites</h3>
<p>To run this tutorial, we must have the following installed:</p>
<ul>
<li>Java programming language (&gt; 8)</li>
</ul>
<pre><code class="language-shell">$ java -version
java version &quot;1.8.0_201&quot;
</code></pre>
<ul>
<li>A package and dependency manager, for example <a href="https://maven.apache.org">Maven</a> or <a href="https://gradle.org">Gradle</a></li>
<li>An IDE (Integrated development environment), for this tutorial, we use Eclipse</li>
<li>A running IPFS node (&gt; 0.4.x)
    <em>Follow <a href="https://kauri.io/article/b01b9b7bebcd4ebf80edf021bdd0e232/v2/installing-ipfs">the following article</a> to learn how to install an IPFS node (go-ipfs)</em></li>
</ul>
<h3 id="dependencies">Dependencies</h3>
<p>To get started, import the <code>java-ipfs-http-client</code> dependency</p>
<h4 id="maven">Maven</h4>
<p>Using Maven, we first need to configure the repository that hosts the dependency and then import the dependency. Add the code below before the closing <code>&lt;/project&gt;</code> tag:</p>
<p><em><a href="https://github.com/gjeanmart/kauri-content/blob/master/java-ipfs/pom.xml">pom.xml</a></em></p>
<pre><code class="language-xml"> &lt;properties&gt;
   &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;
   &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;
   &lt;java-ipfs-http-client.version&gt;v1.2.3&lt;/java-ipfs-http-client.version&gt;
 &lt;/properties&gt;

 &lt;repositories&gt;
   &lt;repository&gt;
     &lt;id&gt;jitpack.io&lt;/id&gt;
     &lt;url&gt;https://jitpack.io&lt;/url&gt;
   &lt;/repository&gt;
 &lt;/repositories&gt;

 &lt;dependencies&gt;
   &lt;dependency&gt;
     &lt;groupId&gt;com.github.ipfs&lt;/groupId&gt;
     &lt;artifactId&gt;java-ipfs-http-client&lt;/artifactId&gt;
     &lt;version&gt;${java-ipfs-http-client.version}&lt;/version&gt;
   &lt;/dependency&gt;
 &lt;/dependencies&gt;
</code></pre>
<h4 id="gradle">Gradle</h4>
<p>The equivalent using Gradle:</p>
<pre><code class="language-groovy">dependencies {
  compile &quot;com.github.ipfs:java-ipfs-http-client:v1.2.3&quot;
}
</code></pre>
<p><br /></p>
<h3 id="connect-to-ipfs">Connect to IPFS</h3>
<p>Once we've imported <code>java-ipfs-http-client</code>, the first step of our application is connecting to an IPFS node.</p>
<h4 id="connect-by-host-and-port">Connect by host and port</h4>
<p>We can connect by a host and port like this:</p>
<pre><code class="language-java">IPFS ipfs = new IPFS(&quot;localhost&quot;, 5001);
</code></pre>
<h4 id="connect-by-multiaddr">Connect by multiaddr</h4>
<p>It is also possible to connect by <a href="https://multiformats.io/multiaddr">multiaddr</a>. A multiaddr represents a self-describing network address.</p>
<blockquote>
<p>Multiaddr is a format for encoding addresses from various well-established network protocols. It is useful to write applications that future-proof their use of addresses and allow multiple transport protocols and addresses to coexist.</p>
</blockquote>
<pre><code class="language-java">IPFS ipfs = new IPFS(&quot;/ip4/127.0.0.1/tcp/5001&quot;);
</code></pre>
<p>If the IPFS node sits behind a proxy with SSL (like <a href="https://infura.io/">Infura</a>), we can configure <code>java-ipfs-http-client</code> to use <code>https</code> rather than <code>http</code> but a multiaddr is required.</p>
<pre><code class="language-java">IPFS ipfs = new IPFS(&quot;/dnsaddr/ipfs.infura.io/tcp/5001/https&quot;);
</code></pre>
<p><br /></p>
<h3 id="add-content-to-ipfs">Add content to IPFS</h3>
<p>When adding a file on the IPFS network, the file is uploaded to the IPFS node we are connected to and stored in its local datastore. This operation returns a unique identifier of the file called "multihash" (for example: <code>Qmaisz6NMhDB51cCvNWa1GMS7LU1pAxdF4Ld6Ft9kZEP2a</code>).</p>
<p><img alt="" src="https://imgur.com/F5U0gHN.png" /></p>
<p>We use the <code>ipfs.add(NamedStreamable file): List&lt;MerkleNode&gt;</code> method to store content on the IPFS node we are connected to. This method takes a <code>NamedStreamable</code> or a <code>List&lt;NamedStreamable&gt;</code> as input. <code>NamedStreamable</code> has four different implementations:</p>
<ul>
<li><code>FileWrapper</code> wraps a <code>java.io.File</code></li>
<li><code>InputStreamWrapper</code> wraps a <code>java.io.InputStream</code></li>
<li><code>ByteArrayWrapper</code> wraps a <code>byte[]</code></li>
<li><code>DirWrapper</code> wraps a <code>(String name, List&lt;NamedStreamable&gt; children)</code> to describe a hierarchical files structure</li>
</ul>
<p>We can also add optional parameters to the method:</p>
<ul>
<li><code>wrap</code> [boolean]&#x3A; Wrap files into a directory.</li>
<li><code>hashOnly</code> [boolean]&#x3A; Only chunk and hash - do not write to the datastore.</li>
</ul>
<p>Finally, the method returns a list of <code>MerkleNode</code> which represents the content-addressable objects just added on the IPFS network.</p>
<h4 id="file-filewrapper">File (FileWrapper)</h4>
<p>We can use <code>NamedStreamable.FileWrapper</code> to pass a <code>java.io.File</code> to IPFS.</p>
<pre><code class="language-java">try {
  NamedStreamable.FileWrapper file = new NamedStreamable.FileWrapper(new File(&quot;/home/gjeanmart/Documents/hello.txt&quot;));
  MerkleNode response = ipfs.add(file).get(0);
  System.out.println(&quot;Hash (base 58): &quot; + response.hash.toBase58());
} catch (IOException ex) {
  throw new RuntimeException(&quot;Error whilst communicating with the IPFS node&quot;, ex);
}
</code></pre>
<h4 id="inputstream-inputstreamwrapper">InputStream (InputStreamWrapper)</h4>
<p>If you are dealing with a <code>java.io.InputStream</code>, use <code>NamedStreamable.InputStreamWrapper</code>:</p>
<pre><code class="language-java">try {
  NamedStreamable.InputStreamWrapper is = new NamedStreamable.InputStreamWrapper(new FileInputStream(&quot;/home/gjeanmart/Documents/hello.txt&quot;));
  MerkleNode response = ipfs.add(is).get(0);
  System.out.println(&quot;Hash (base 58): &quot; + response.name.get() + &quot; - &quot; + addResponse.hash.toBase58());
} catch (IOException ex) {
  throw new RuntimeException(&quot;Error whilst communicating with the IPFS node&quot;, ex);
}
</code></pre>
<h4 id="byte-array-bytearraywrapper">Byte Array (ByteArrayWrapper)</h4>
<p>To store a <code>byte[]</code>, use <code>NamedStreamable.ByteArrayWrapper</code>.</p>
<pre><code class="language-java">try {
  NamedStreamable.ByteArrayWrapper bytearray = new NamedStreamable.ByteArrayWrapper(&quot;hello&quot;.getBytes());
  MerkleNode response = ipfs.add(bytearray).get(0);
  System.out.println(&quot;Hash (base 58): &quot; + response.hash.toBase58());
} catch (IOException ex) {
  throw new RuntimeException(&quot;Error whilst communicating with the IPFS node&quot;, ex);
}
</code></pre>
<h4 id="directory-dirwrapper">Directory (DirWrapper)</h4>
<p>Finally, to store files inside folders, use <code>NamedStreamable.DirWrapper</code>. For example, with the folder structure below:</p>
<pre><code class="language-text">folder
|-- hello.txt
|-- hello2.txt
</code></pre>
<p>Use:</p>
<pre><code class="language-java">try {
  NamedStreamable.FileWrapper file1 = new NamedStreamable.FileWrapper(new File(&quot;/home/gjeanmart/Documents/hello.txt&quot;));
  NamedStreamable.FileWrapper file2 = new NamedStreamable.FileWrapper(new File(&quot;/home/gjeanmart/Documents/hello2.txt&quot;));

  NamedStreamable.DirWrapper directory = new NamedStreamable.DirWrapper(&quot;folder&quot;, Arrays.asList(file1, file2));
  List&lt;MerkleNode&gt; response = ipfs.add(directory);
  response.forEach(merkleNode -&gt;
  System.out.println(&quot;Hash (base 58): &quot; + merkleNode.name.get() + &quot; - &quot; + merkleNode.hash.toBase58()));
} catch (IOException ex) {
  throw new RuntimeException(&quot;Error whilst communicating with the IPFS node&quot;, ex);
}
</code></pre>
<p><img alt="" src="https://i.imgur.com/OWF5ppv.png" /></p>
<h4 id="merklenode">MerkleNode</h4>
<p>IPFS is a peer-to-peer network essentially used to share linked Objects from a giant Merkle tree. When adding one file or a directory to IPFS, this operation returns the new dedicated branch of the Merkle tree composed of one or more linked Objects. We represent these branches in Java as a <code>List&lt;MerkleNode&gt;</code>.</p>
<p>A <code>MerkleNode</code> is composed of the following information:</p>
<ul>
<li><strong>hash</strong> (multihash): a unique identifier of the Object within IPFS</li>
<li><strong>name</strong> (optional): Name of the object (usually the folder or filename)</li>
<li><strong>size</strong> (optional): Size of the object</li>
<li><strong>links</strong> (zero or more): A list of child Objects</li>
</ul>
<h4 id="multihash">MultiHash</h4>
<p><a href="https://multiformats.io/multihash/">Multihash</a> (<a href="https://github.com/multiformats/multihash">github</a>) is a self-describing hash to uniquely identify and locate an object into the IPFS Merkle tree. It is usually represented in Base58, but we can also represent it in hexadecimal.</p>
<p>A multihash consists of different parts:</p>
<p><img alt="" src="https://i.imgur.com/NQNmMcU.png" /></p>
<p>For example (in hexadecimal)</p>
<p><img alt="" src="https://i.imgur.com/Vik04Ap.png" /></p>
<h5 id="read-a-base58-hash-to-multihash">Read a Base58 hash to Multihash</h5>
<pre><code class="language-java">Multihash multihash = Multihash.fromBase58(&quot;QmT78zSuBmuS4z925WZfrqQ1qHaJ56DQaTfyMUF7F8ff5o&quot;);
</code></pre>
<h5 id="read-a-base16-hexadecinal-hash-to-multihash">Read a Base16 (hexadecinal) hash to Multihash</h5>
<pre><code class="language-java">Multihash multihash = Multihash.fromHex(&quot;122046d44814b9c5af141c3aaab7c05dc5e844ead5f91f12858b21eba45768b4ce&quot;);
</code></pre>
<h5 id="convert-a-multihash-to-base58">Convert a Multihash to Base58</h5>
<pre><code class="language-java">String hash = multihash.toBase58();
</code></pre>
<h5 id="convert-a-multihash-to-base16">Convert a Multihash to Base16</h5>
<pre><code class="language-java">String hash = multihash.toHex();
</code></pre>
<h5 id="convert-a-multihash-to-a-byte-array">Convert a Multihash to a byte array</h5>
<pre><code class="language-java">byte[] hash = multihash.toBytes();
</code></pre>
<p><br /></p>
<h3 id="read-content-from-ipfs">Read content from IPFS</h3>
<p>In order to read a file on the IPFS network, we need to pass the hash (multihash) of the Object we want to retrieve. Then IPFS finds and retrieves the file from the closest peer hosting the file via the peer-to-peer network and a <a href="https://en.wikipedia.org/wiki/Distributed_hash_table">Distributed Hash Table</a>.</p>
<p><img alt="" src="https://imgur.com/ormQrVT.png" /></p>
<p>Using <code>java-ipfs-http-client</code>, there are two ways to read content from the IPFS network.</p>
<h4 id="read-content-into-a-byte-array">Read content into a Byte array</h4>
<p>The most common way to find and read content from IPFS for a given hash is to use the method <code>ipfs.cat(&lt;hash&gt;): byte[]</code></p>
<pre><code class="language-java">try {
  String hash = &quot;QmT78zSuBmuS4z925WZfrqQ1qHaJ56DQaTfyMUF7F8ff5o&quot;; // Hash of a file
  Multihash multihash = Multihash.fromBase58(hash);
  byte[] content = ipfs.cat(multihash);
  System.out.println(&quot;Content of &quot; + hash + &quot;: &quot; + new String(content));
} catch (IOException ex) {
  throw new RuntimeException(&quot;Error whilst communicating with the IPFS node&quot;, ex);
}
</code></pre>
<p><img alt="" src="https://i.imgur.com/QD6fx2R.png" /></p>
<p>It's also possible to retrieve a file from a directory structure by passing the path of the file like this <code>ipfs.cat(&lt;hash&gt;, &lt;path&gt;): byte[]</code>:</p>
<pre><code class="language-java">try {
  String hash = &quot;QmNoQbeckeCN7FWt6mVcxTf7CAyyHUMsqtCWtMLFdsUayN&quot;; // Hash of a directory
  Multihash multihash = Multihash.fromBase58(hash);
  byte[] content = ipfs.cat(multihash, &quot;/hello2.txt&quot;);
  System.out.println(&quot;Content of &quot; + hash + &quot;/hello2.txt : &quot; + new String(content));
} catch (IOException ex) {
  throw new RuntimeException(&quot;Error whilst communicating with the IPFS node&quot;, ex);
}
</code></pre>
<p><img alt="" src="https://i.imgur.com/LpwsU4P.png" /></p>
<h4 id="read-content-into-a-stream">Read content into a stream</h4>
<p>The second way consists in using the method <code>ipfs.catStream(&lt;hash&gt;): InputStream</code> to write the response in a Stream.</p>
<pre><code class="language-java">try{
  String hash = &quot;QmT78zSuBmuS4z925WZfrqQ1qHaJ56DQaTfyMUF7F8ff5o&quot;; // Hash of a file
  Multihash multihash = Multihash.fromBase58(hash);
  InputStream inputStream = infuraIPFS.catStream(filePoinhashter2);
  Files.copy(inputStream, Paths.get(&quot;/home/gjeanmart/Documents/helloResult.txt&quot;));
} catch (IOException ex) {
  throw new RuntimeException(&quot;Error whilst communicating with the IPFS node&quot;, ex);
}
</code></pre>
<p><br /></p>
<h3 id="pinunpin-content">Pin/Unpin content</h3>
<p>Adding a file on IPFS only creates a copy of the file in one location (your node), so the file is readable from any node unless your node goes offline. Pinning is the action to replicate a file (already available somewhere on the network) to our local node.</p>
<p>This method is useful to bring speed and high availability to a file.</p>
<p><img alt="" src="https://imgur.com/nkf28QP.png" /></p>
<h4 id="pin">Pin</h4>
<p>The method <code>ipfs.pin.add(&lt;hash&gt;): void</code> offers to pin a file by hash on our node.</p>
<pre><code class="language-java">try {
  String hash = &quot;QmT78zSuBmuS4z925WZfrqQ1qHaJ56DQaTfyMUF7F8ff5o&quot;; // Hash of a file
  Multihash multihash = Multihash.fromBase58(hash);
  ipfs.pin.add(multihash);
} catch (IOException ex) {
  throw new RuntimeException(&quot;Error whilst communicating with the IPFS node&quot;, ex);
}
</code></pre>
<p><em>Pinning an Object linked to other Objects (children) such as a directory automatically pins all the subsequent children.</em></p>
<h4 id="unpin">Unpin</h4>
<p>The reverse operation is also possible with the method <code>ipfs.pin.rm(&lt;hash&gt;, &lt;recursive&gt;): void</code> which removes a file from our node.</p>
<pre><code class="language-java">try {
  String hash = &quot;QmT78zSuBmuS4z925WZfrqQ1qHaJ56DQaTfyMUF7F8ff5o&quot;; // Hash of a file
  Multihash multihash = Multihash.fromBase58(hash);
  ipfs.pin.rm(multihash)
} catch (IOException ex) {
  throw new RuntimeException(&quot;Error whilst communicating with the IPFS node&quot;, ex);
}
</code></pre>
<p>We can use the flag <code>recursive [boolean]</code> to remove (unpin) all the subsequent linked objects to the object identified by the hash (default true).</p>
<h4 id="list">List</h4>
<p>Finally, we can list all the content hosted on our local node with the method <code>ipfs.pin.ls(&lt;pinType&gt;): Map&lt;Multihash, Object&gt;</code></p>
<pre><code class="language-java">try {
  Map&lt;Multihash, Object&gt; list = ipfs.pin.ls(PinType.all);
  list.forEach((hash, type)
    -&gt; System.out.println(&quot;Multihash: &quot; + hash + &quot; - type: &quot; + type));
} catch (IOException ex) {
  throw new RuntimeException(&quot;Error whilst communicating with the IPFS node&quot;, ex);
}
</code></pre>
<p><img alt="" src="https://i.imgur.com/bNBgYtk.png" /></p>
<p>We can request different types of pinned keys to list:</p>
<ul>
<li><code>all</code>: All Objects</li>
<li><code>direct</code>: Objects pinned directly</li>
<li><code>indirect</code>: Objects referenced by recursive pins</li>
<li><code>recursive</code>: Roots of recursive pins (like direct, but also pin the children of the object)</li>
</ul>
<p><br /></p>
<h3 id="ipns">IPNS</h3>
<p>IPNS stands for "InterPlanetary Naming System" and represents a global mutable namespace accessible from anywhere on the IPFS network to assign a name against a hash (similar to a DNS server assigning a name against a server IP). This can be useful when we want to share a link of a mutable object.</p>
<p>Let's say for example we want to host an article on IPFS, the article (version 1) has a unique hash, but if we decide to update the article and host it on IPFS, the hash is different, and we have to reshare the new hash. We can use IPNS to prevent this issue, it is possible to link a name to a hash and update the hash a much as we want so we only have to reassign the hash of the article to a name and share the name, if we update the article, we only have to update the name resolution to point to the latest version.</p>
<p><em>Note: IPNS is still work in progress and is slow to use, it takes approximately 1-2 min to publish a name.</em></p>
<h4 id="keys">Keys</h4>
<p>IPNS is based on a distributed Public Key Infrastructure (PKI). To get started, we need a keypair available on our IPFS node.</p>
<p>We can use the keypair to store one key/value pair where the key represents the "name" and "value" the hash to resolve.</p>
<h5 id="generate-a-key">Generate a key</h5>
<p>First, we need to generate a keypair using the method <code>ipfs.key.gen(name, type, size): KeyInfo</code>.</p>
<pre><code class="language-java">try {
  String keyName =&quot;myarticle&quot;;
  Optional&lt;String&gt; keyType = Optional.of(&quot;rsa&quot;);
  Optional&lt;String&gt; keySize = Optional.of(&quot;2048&quot;);

  KeyInfo key = ipfs.key.gen(keyName, keyType, keySize);
  System.out.println(&quot;key name: &quot; + key.name);
  System.out.println(&quot;key.hash: &quot; + key.id);
} catch (IOException ex) {
  throw new RuntimeException(&quot;Error whilst communicating with the IPFS node&quot;, ex);
}
</code></pre>
<p><img alt="" src="https://i.imgur.com/KQUKhk2.png" /></p>
<p>The following function returns a <code>KeyInfo</code> object composed of the name and the id (multihash) of the key representing the name which we can use to resolve a hash.</p>
<h5 id="delete-a-key">Delete a key</h5>
<p>It is also possible to remove a key using <code>ipfs.key.rm(keyName): void</code>.</p>
<pre><code class="language-java">try {
  ipfs.key.rm(keyName);
} catch (IOException ex) {
  throw new RuntimeException(&quot;Error whilst communicating with the IPFS node&quot;, ex);
}
</code></pre>
<h5 id="list-all-keys">List all keys</h5>
<p>The method <code>ipfs.key.list()</code> allows us to list all keys available on our node.</p>
<pre><code class="language-java">try {
  List&lt;KeyInfo&gt; keys = ipfs.key.list();
  keys.forEach(key -&gt;
    System.out.println(&quot;keyInfo: name=&quot; + key.name + &quot;, hash=&quot; + key.id));
} catch (IOException ex) {
  throw new RuntimeException(&quot;Error whilst communicating with the IPFS node&quot;, ex);
}
</code></pre>
<p><img alt="" src="https://i.imgur.com/3TefgpL.png" /></p>
<p>The <code>self</code> key represents the default key generated when we launch IPFS for the first time.</p>
<h4 id="publish">Publish</h4>
<p>Once we have a exclusive keypair available, we can use it to publish a hash against it using the method <code>ipfs.name.publish(hash, keyName)</code>:</p>
<pre><code class="language-java">try {
  String hash = &quot;QmWfVY9y3xjsixTgbd9AorQxH7VtMpzfx2HaWtsoUYecaX&quot; // Hash of &quot;hello
  Map response = ipfs.name.publish(hash, Optional.of(keyName));
  System.out.println(&quot;publish(hash=&quot;+hash+&quot;, key=&quot;+keyName+&quot;): &quot; + response);
} catch (IOException ex) {
  throw new RuntimeException(&quot;Error whilst communicating with the IPFS node&quot;, ex);
}
</code></pre>
<p><img alt="" src="https://i.imgur.com/vRIeeWF.png" /></p>
<p><em>Note that this operation is particularly slow and can take up to two minutes to execute</em></p>
<h4 id="resolve">Resolve</h4>
<p>Just like a DNS, reading an object from an IPNS name is a two steps process:</p>
<ol>
<li>Resolve the hash against the name</li>
<li>Read the content from the hash</li>
</ol>
<pre><code class="language-java">try {
  KeyInfo key = ipfs.key.list().stream()
    .filter(k -&gt; k.name.equals(keyName))
    .findAny()
    .orElseThrow(() -&gt; new RuntimeException(&quot;Key &quot; + keyName + &quot; not found&quot;));

  String resolveResponse = ipfs.name.resolve(key.id);
  System.out.println(&quot;resolve(key=&quot;+key.id+&quot;): &quot; + resolveResponse);

  byte[] content = ipfs.cat(Multihash.fromBase58(resolveResponse.substring(6)));
  System.out.println(&quot;Content: &quot; + new String(content));
} catch (IOException ex) {
  throw new RuntimeException(&quot;Error whilst communicating with the IPFS node&quot;, ex);
}
}
</code></pre>
<p><img alt="" src="https://i.imgur.com/AtD5wxv.png" /></p>
<p><br /></p>
<h3 id="other-operations">Other operations</h3>
<p>The <code>java-ipfs-http-client</code> library wraps many other API operations available on the node.</p>
<h4 id="node-version">Node version</h4>
<p>To get the Node version we are connected to, the library provides the method <code>ipfs.version(): String</code></p>
<pre><code class="language-java">try {
  String version = ipfs.version();
  System.out.println(&quot;Node version: &quot; + version);
} catch (IOException ex) {
  throw new RuntimeException(&quot;Error whilst communicating with the IPFS node&quot;, ex);
}
</code></pre>
<p><img alt="" src="https://i.imgur.com/OCwJtk2.png" /></p>
<h4 id="node-peers">Node peers</h4>
<p>To retrieve the list of Peers connected to our local node:</p>
<pre><code class="language-java">List&lt;Multihash&gt; peers = ipfs.refs.local()
peers.forEach(multihash -&gt;
  System.out.println(&quot;Peer ID: &quot; + multihash));
</code></pre>
<p><img alt="" src="https://i.imgur.com/vuRKfVF.png" /></p>
<p><br /></p>
<h3 id="references">References</h3>
<ul>
<li><a href="https://github.com/gjeanmart/kauri-content/tree/master/java-ipfs">GitHub Repository</a></li>
<li><a href="https://docs.ipfs.io/reference/api/http/">API Server documentation</a></li>
<li><a href="https://medium.com/@ConsenSys/an-introduction-to-ipfs-9bba4860abd0">Introduction to IPFS (by Consensys)</a></li>
<li><a href="http://whatdoesthequantsay.com/2015/09/13/ipfs-introduction-by-example">IPFS Introduction by Example (by Christian Lundkvist)</a></li>
<li><a href="https://medium.com/textileio/the-definitive-guide-to-publishing-content-on-ipfs-ipns-dfe751f1e8d0">The definitive guide to publishing content on the decentralized web (by Textile)</a></li>
</ul>
<hr />
<ul>
<li><strong>Kauri original title:</strong> Managing storage in a Java application with IPFS</li>
<li><strong>Kauri original link:</strong> https://kauri.io/managing-storage-in-a-java-application-with-ipfs/3e8494f4f56f48c4bb77f1f925c6d926/a</li>
<li><strong>Kauri original author:</strong> Grégoire Jeanmart (@gregjeanmart)</li>
<li><strong>Kauri original Publication date:</strong> 2019-08-14</li>
<li><strong>Kauri original tags:</strong> java, ipfs, ipns</li>
<li><strong>Kauri original hash:</strong> QmPT2DAEUBhFeshVdjwgG77GRQCPiAfSJCReqMTPu82BSp</li>
<li><strong>Kauri original checkpoint:</strong> Qmekp5iiDi5N5M4KdtAVGBEJEF3ahMgWYZJqL7s1qmkQ9g</li>
</ul></div>
                <footer>
    <div class="footer-buttons">
        <div class="previous"><a href="../running-a-pantheon-node-in-java-integration-tests/" title="Running a Pantheon Node in Java Integration Tests"><span>Previous</span></a></div>
        <div class="next"><a href="../using-besu-the-java-ethereum-client-with-linuxmac/" title="Using Besu, the Java Ethereum Client with Linux/MacOS"><span>Next</span></a></div>
    </div>
    <div class="footer-note">
        <p>
            Built with <a href="http://www.mkdocs.org">MkDocs</a> using
            <a href="https://github.com/daizutabi/mkdocs-ivory">Ivory theme</a>.
        </p>
    </div>
</footer>
            </div>
        </main>
    </div>
    <script>var base_url = '../../..';</script>
    <script src="../../../js/theme.js"></script>
    <script src="../../../search/main.js"></script>
</body>

</html>